<html>
  <head>
        <link href="https://fonts.googleapis.com/css?family=McLaren|Yeon+Sung&display=swap" rel="stylesheet">
      <style>
          img{
              display: none;
          }

          h1{
            font-family: 'Yeon Sung', cursive;
            font-size: 40px;
          }

          p{
            font-family: 'McLaren', cursive;
          }
      </style>
    
    <h1>PAIR-UP IMAGE</h1>
    <p style="width: 500px;">
        When you first click the grid, the image will be shown. After that, when you choose another grid, if the images match, it will keep showing, otherwise, it will be disappeared after 0.5 second. Try to remember and match them all to win.
    </p>
    <script src="p5.js"></script>
    <script>
    
    let imglist = [];
    let imgnum = 10;

    function shuffle(a) {
        for (var j=0; j<a.length; j++) {
            var ranpo = parseInt(random(0,a.length-1));
            var temp = a[ranpo];
            a[ranpo] = a[j];
            a[j] = temp;
        }
        return a;
    }

    function preload() {
        // imgnum = random(0,800);
        for (var j=0; j<50; j++){
            imglist[j] = createImg('https://picsum.photos/id/'+parseInt(j+imgnum)+'/200/200');
        }
        for (var j=50; j<100; j++){
            imglist[j] = imglist[j-50+1];
        }
        shuffle(imglist)

    }


    function setup() {
        createCanvas(500, 500);
        background('#000');
    }

    var cursorimg = -1;
    var showedimg = {};
    var tempshowimg = -1;
    var tempshowimg2 = -1;

    function draw() {
        background('#EEEEEE');

        //For (var BEGIN; END; INTERVAL){
        //DO SOMETHING }
        var nowimgnum = 0;
        cursorimg = -1;
        for (var x = 0; x < width; x += width / 10) {
            for (var y = 0; y < height; y += height / 10) {
                stroke(0);
                strokeWeight(1);
                if ((mouseX>x&&mouseX<x+width/10&&mouseY>y&&mouseY<y+height/10)){
                    cursorimg = nowimgnum;
                }
                if (
                    // (mouseX>x&&mouseX<x+width/10&&mouseY>y&&mouseY<y+height/10)||
                    showedimg[nowimgnum]||
                    nowimgnum==tempshowimg||
                    nowimgnum==tempshowimg2
                ){
                    image(imglist[nowimgnum],x,y,50,50);
                    // cursorimg = nowimgnum;
                }
                
                nowimgnum++;
                line(x, 0, x, height);
                line(0, y, width, y);
            }
        }
        // image(img,0,0,50,50)
    }

    function mouseClicked() {
        if (won()){
            alert('You Win');
            showedimg = {}
            tempshowimg = -1
            tempshowimg2 = -1
            return;
        }
        if (cursorimg==tempshowimg||cursorimg==tempshowimg2||showedimg[cursorimg])
            return;
        if (cursorimg!=-1){
            if (tempshowimg==-1){
                tempshowimg = cursorimg;
            } else {
                if (imglist[tempshowimg]==imglist[cursorimg]){
                    showedimg[tempshowimg] = 1
                    showedimg[cursorimg] = 1
                    tempshowimg = -1
                    tempshowimg2 = -1
                } else {
                    tempshowimg2 = cursorimg
                    setTimeout(function(){
                        tempshowimg = -1;
                        tempshowimg2 = -1;
                    },500)
                    
                }
            }
        }

        
    }

    function won(){
        for (var j=0; j<100; j++){
            if (!showedimg[j])
                return 0;
        }
        return 1;
    }
    
    
    </script>
  </head>
  <body>
  </body>
</html>
